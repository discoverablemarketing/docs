---
title: "MCP Integration"
description: "Use ChatAds with AI assistants via Model Context Protocol"
---

## Overview

ChatAds supports the [Model Context Protocol (MCP)](https://modelcontextprotocol.io/) for seamless integration with AI assistants like Claude Desktop and other MCP-compatible clients.

## Installation

Install the ChatAds MCP wrapper from PyPI:

```bash
pip install chatads-mcp-wrapper
```

<Note>
The MCP wrapper is a **Python package**. Requires Python 3.8+.
</Note>

## Claude Desktop Configuration

Add ChatAds to your Claude Desktop MCP configuration:

### Option 1: Using python -m (Recommended)

```json
{
  "mcpServers": {
    "chatads": {
      "command": "python",
      "args": ["-m", "chatads_mcp_wrapper"],
      "env": {
        "CHATADS_API_KEY": "cak_your_api_key"
      }
    }
  }
}
```

### Option 2: Using the chatads-mcp command

First, find where the command was installed:

```bash
which chatads-mcp
```

Then use the full path in your config:

```json
{
  "mcpServers": {
    "chatads": {
      "command": "/path/from/which/chatads-mcp",
      "args": [],
      "env": {
        "CHATADS_API_KEY": "cak_your_api_key"
      }
    }
  }
}
```

<Tip>
Common installation paths:
- Standard pip: `~/.local/bin/chatads-mcp`
- pyenv: `~/.pyenv/shims/chatads-mcp`
- System Python: `/usr/local/bin/chatads-mcp`
</Tip>

## Available Tools

### chatads_message_send

The main MCP tool for fetching affiliate product recommendations.

**Parameters:**
- `message` (required): The user message to analyze (1-5000 chars)
- `ip` (optional): Client IP address for geo-detection (max 64 chars)
- `country` (optional): ISO 3166-1 alpha-2 country code (e.g., "US", "GB"). Skips IP detection if provided.
- `message_analysis` (optional): Keyword extraction method. Options: `"fast"` (NLP ~50ms), `"balanced"` (default ~150ms), `"thorough"` (LLM ~300ms)
- `fill_priority` (optional): URL resolution. Options: `"speed"` (skip fallback), `"coverage"` (default, full chain)
- `min_intent` (optional): Minimum purchase intent. Options: `"any"`, `"low"` (default), `"medium"`, `"high"`
- `skip_message_analysis` (optional): Skip NLP/LLM and use message directly as search query. Default: `false`

**Example Usage in Claude Desktop:**

```
User: Can you find me affiliate links for yoga mats?
Assistant: [Uses chatads_message_send tool]
```

## Response Format

The MCP tool returns the standard ChatAds response:

```json
{
  "success": true,
  "data": {
    "matched": true,
    "ad": {
      "product": "Yoga Mat",
      "link": "https://amazon.com/...",
      "message": "Perfect for beginners",
      "category": "fitness"
    }
  }
}
```

## Testing Your Setup

1. Restart Claude Desktop after updating the config
2. Ask Claude: "What tools do you have access to?"
3. You should see `chatads_message_send` in the list
4. Test it: "Use chatads_message_send to find recommendations for 'best standing desk'"

## Best Practices

<CardGroup cols={2}>
  <Card title="Use in server context" icon="server">
    MCP servers run server-side, keeping your API key secure.
  </Card>
  <Card title="Handle errors gracefully" icon="shield">
    Implement proper error handling for rate limits and network issues.
  </Card>
  <Card title="Cache when possible" icon="database">
    Consider caching responses for repeated queries to save API calls.
  </Card>
  <Card title="Set appropriate timeouts" icon="clock">
    Configure reasonable timeouts for the MCP tool calls.
  </Card>
</CardGroup>
